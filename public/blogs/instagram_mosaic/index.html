<!DOCTYPE html>
<html lang="en">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />



<title>Create an Instagram mosaic</title>




  <link rel="shortcut icon" href="/images/favicon.png" type="image/png" />


  <meta name="description" content="Juan Marinero - Data Scientist"
/>

  <meta name="keywords" content="          Juan, Marinero, Spain, Europe, Spanish, English, German, Deutsch, Bilingual,
          Remote Work, Contract, Full-time, Part-time, Job, Job Offer, Data Scientist,
          Data Science, Machine Learning, AI, Artificial Intelligence, Python, R, SQL, 
          Statistical Analysis, Data Visualization, Big Data, Deep Learning, Neural Networks, 
          Predictive Modeling, Data Mining, A/B Testing, Feature Engineering, MLOps, 
          Natural Language Processing, NLP, Computer Vision, Time Series Analysis, 
          Cloud Computing, AWS, Azure, GCP, Docker, Kubernetes, TensorFlow, PyTorch, 
          Scikit-learn, Pandas, NumPy, Spark, Hadoop,
          ETL, Data Pipelines, Business Intelligence, Analytics, Experimentation, 
          Reinforcement Learning, Bayesian Statistics, Regression, Classification, 
          Clustering, Dimensionality Reduction, Optimization, Juan Marinero, Spain, 
          Europe, Data Scientist, ML Engineer, AI Specialist, Quantitative Analysis, 
          Research, PhD, Mathematics, Statistics, Programming, Data Governance, 
          Ethics in AI, Explainable AI, Model Deployment, CI/CD, Agile, Scrum, 
          Startup, Tech, Consulting, Finance, Healthcare, E-commerce, Retail, 
          Marketing Analytics, Customer Segmentation, Recommendation Systems, 
          Anomaly Detection, Fraud Detection, IoT, Edge Computing, Open Source, 
          GitHub, Kaggle, Competitions, Publications, Research Papers, Teaching, 
          Mentoring, Public Speaking, Conferences, Workshops, Technical Writing
        "
/>
<meta name="referrer" content="no-referrer-when-downgrade" />

<meta name="HandheldFriendly" content="True" />
<meta name="MobileOptimized" content="320" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />











<link rel="stylesheet" href="/css/style.min.5225559b588c6dd9e2575685da1d0d3c6d059652c9b6dae2b54d59a14ad811ce.css" type="text/css" integrity="sha256-UiVVm1iMbdniV1aF2h0NPG0FllLJttritU1ZoUrYEc4=" />

<meta property="og:url" content="http://localhost:1313/blogs/instagram_mosaic/">
  <meta property="og:site_name" content="J. Marinero - Data Scientist & AI Engineer">
  <meta property="og:title" content="Create an Instagram mosaic">
  <meta property="og:description" content="Let’s create a 4:5 Instagram mosaic. Instead of following manual steps, we will achieve this on the terminal.
Table of Contents
Steps Example Bonus Code Extra: $\LaTeX$ in Hugo Scroll Steps Get the desired image Rename it as img_original.jpg Open the terminal. Change to the image directory (e.g. cd ~/Downloads) Copy the CODE at the end of this post Paste it on a script via $EDITOR create_ig_mosaic.sh (CWD is still ~/Downloads), or in your ~/.zshrc file Make it executable chmod &#43;x create_ig_mosaic.sh Run source ./create_ig_mosaic.sh &amp;&amp; create_ig_mosaic Alternative, no need to rename the file.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blogs">
    <meta property="og:image" content="http://localhost:1313/images/cover-image.jpg">


  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://localhost:1313/images/cover-image.jpg">
  <meta name="twitter:title" content="Create an Instagram mosaic">
  <meta name="twitter:description" content="Let’s create a 4:5 Instagram mosaic. Instead of following manual steps, we will achieve this on the terminal.
Table of Contents
Steps Example Bonus Code Extra: $\LaTeX$ in Hugo Scroll Steps Get the desired image Rename it as img_original.jpg Open the terminal. Change to the image directory (e.g. cd ~/Downloads) Copy the CODE at the end of this post Paste it on a script via $EDITOR create_ig_mosaic.sh (CWD is still ~/Downloads), or in your ~/.zshrc file Make it executable chmod &#43;x create_ig_mosaic.sh Run source ./create_ig_mosaic.sh &amp;&amp; create_ig_mosaic Alternative, no need to rename the file.">


  <meta itemprop="name" content="Create an Instagram mosaic">
  <meta itemprop="description" content="Let’s create a 4:5 Instagram mosaic. Instead of following manual steps, we will achieve this on the terminal.
Table of Contents
Steps Example Bonus Code Extra: $\LaTeX$ in Hugo Scroll Steps Get the desired image Rename it as img_original.jpg Open the terminal. Change to the image directory (e.g. cd ~/Downloads) Copy the CODE at the end of this post Paste it on a script via $EDITOR create_ig_mosaic.sh (CWD is still ~/Downloads), or in your ~/.zshrc file Make it executable chmod &#43;x create_ig_mosaic.sh Run source ./create_ig_mosaic.sh &amp;&amp; create_ig_mosaic Alternative, no need to rename the file.">
  <meta itemprop="wordCount" content="1360">
  <meta itemprop="image" content="http://localhost:1313/images/cover-image.jpg">






<style>
:root {
    --cover-text-color: #246B9F;
    --highlight: #80A4BE;
    --cover-title-and-description-guard-bg-color: rgba(159, 208, 103, 0.7);
    --cover-title-text-shadow: white 0px 0px 12px;
    --sticky-menu-text-color: #246B9F;
    --section-dark-bg-color: #246B9F;
}
 
.post-holder.dark a:hover {
    color: rgba(159, 208, 103, 0.7) !important;
    text-decoration: underline;
}
 
.data-table {
  width: 100%; 
  border-collapse: collapse;
}
.data-cell {
  background-color: #6D9DBF;
  padding: 5%;
  vertical-align: middle;
}
.header-cell {
  background-color: #6D9DBF;
  width: 95%;
  text-align: center;
}
.image-cell {
  width: 45%;
}
.table-image {
  width: 100%; 
  display: block;
}
 
.circular-bg {
  background-color: #6D9DBF;
  clip-path: circle(50% at 50% 50%);  
  aspect-ratio: 1;  
  display: block;  
  margin: 0 auto;  
}

 
 
 
.no-underline-except-hover {
  text-decoration: none;     
  line-height: 2.2em;  
}
.no-underline-except-hover:hover {
  text-decoration: underline;   
}

 
.great-vibes {
  font-family: "Great Vibes", cursive;
}
h1 {
  font-family: "Great Vibes", "Open Sans", sans-serif;
  font-size: 5.5rem;
}
.font-middle-earth-joanna-vu {
  font-family: "MiddleEarth JoannaVu", "Great Vibes", "Open Sans", sans-serif
}

 
 
.tikzjax {
  display: flex;
  justify-content: center;  
  align-items: center;      
}

 
details.table-of-contents-all-bold-but-summary > :not(summary) {
  font-weight: bold;
}
</style>










<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png" />







  <style>@font-face {
  font-family: 'Great Vibes';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url(https://fonts.gstatic.com/s/greatvibes/v20/RWmMoKWR9v4ksMfaWd_JN-XC.ttf) format('truetype');
}
</style>




<script>
window.MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\\[', '\\]']],
    processEscapes: true,
    processEnvironments: true,
    packages: {'[+]': ['ams', 'boldsymbol']}  
  },
  options: {
    skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
    ignoreHtmlClass: 'tex2jax_ignore|tikz-container'
  },
  loader: {
    load: ['[tex]/ams', '[tex]/boldsymbol']
  },
  startup: {
    ready() {
      console.log('MathJax is initializing...');
      MathJax.startup.defaultReady();
      MathJax.startup.promise.then(() => {
        console.log('MathJax typesetting complete');
      }).catch((err) => {
        console.error('MathJax failed:', err);
      });
    }
  }
};
</script>

<script src="https://cdn.jsdelivr.net/npm/core-js-bundle@3/minified.js"></script>

<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@4.0.0/tex-mml-chtml.js"></script>



<link rel="stylesheet" type="text/css" href="https://tikzjax.com/v1/fonts.css">
<script src="https://tikzjax.com/v1/tikzjax.js"></script>



<script src="/js/tikzjax-node.min.679617c0048325b476a16f95d017ba0858e995ffdc938c4fa7f8b994e1e9d2a0.js" integrity="sha256-Z5YXwASDJbR2oW&#43;V0Be6CFjplf/ck4xPp/i5lOHp0qA=" defer></script>




<link rel="stylesheet" href="https://unpkg.com/tachyons@4.12.0/css/tachyons.min.css"/>
</head>
  <body>
  <main class="content page-template page-">
    <article class="post page">
      <header class="post-header">
        
          
        <a id="back-to-main-page" href="/"><i class="fa fa-chevron-left" aria-hidden="true"></i> J. Marinero - Data Scientist &amp; AI Engineer</a>
          
        
      </header>
      <h1 class="post-title">Create an Instagram mosaic</h1>
      <section class="post-content">
        <p>Let&rsquo;s create a <strong>4:5 Instagram mosaic</strong>.
Instead of following <a href="https://www.reddit.com/r/Instagram/comments/1icsc30/creating_a_seamless_45_instagram_mosaic_new/">manual steps</a>,
we will achieve this <strong>on the terminal</strong>.</p>


<div class="html-content">
  <img
    src="/images/blogs/instagram_mosaic/screenshot_instagram_02.png"
    style="width:90%;"
    alt="screenshot_instagram_02.png"
    >
</div>


<p>Table of Contents</p>
<ul>
<li><a href="/blogs/instagram_mosaic/#steps">Steps</a></li>
<li><a href="/blogs/instagram_mosaic/#example">Example</a></li>
<li><a href="/blogs/instagram_mosaic/#bonus">Bonus</a></li>
<li><a href="/blogs/instagram_mosaic/#code">Code</a></li>
<li><a href="/blogs/instagram_mosaic/#extra-latex-in-hugo-scroll">Extra: $\LaTeX$ in Hugo Scroll</a></li>
</ul>
<h2 id="steps">Steps</h2>
<ol>
<li>Get the desired image</li>
<li>Rename it as <code>img_original.jpg</code></li>
<li>Open the terminal. Change to the image directory (e.g. <code>cd ~/Downloads</code>)</li>
<li>Copy the <a href="/blogs/instagram_mosaic/#code">CODE</a> at the end of this post</li>
<li>Paste it on a script via <code>$EDITOR create_ig_mosaic.sh</code> (<code>CWD</code> is still <code>~/Downloads</code>), or in your <code>~/.zshrc</code> file</li>
<li>Make it executable <code>chmod +x create_ig_mosaic.sh</code></li>
<li>Run</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#b58900">source</span> ./create_ig_mosaic.sh <span style="color:#719e07">&amp;&amp;</span> create_ig_mosaic
</span></span></code></pre></div><p>Alternative, no need to rename the file.</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>create_ig_mosaic <span style="color:#2aa198">&#34;dogs_original.jpg&#34;</span>
</span></span></code></pre></div><p>And you can also specify more params, read <code>Example usage</code> in the <a href="/blogs/instagram_mosaic/#code">CODE</a>.</p>
<ol start="8">
<li><strong>Finally</strong> click on <code>4:5</code>-crop when <strong>upload</strong>ing to <strong>Instagram</strong>.</li>
</ol>
<h2 id="example">Example</h2>
<ol>
<li>Go to Pexels. Search for <code>dogs</code> and filter by size <code>large</code> and orientation <code>landscape</code>:
<a href="https://www.pexels.com/search/dogs/?size=large&amp;orientation=landscape">link</a></li>
<li>Download one, <a href="https://www.pexels.com/photo/unrecognizable-woman-walking-dogs-on-leashes-in-countryside-7210754/">e.g.</a></li>
<li>Open a terminal, move where <code>create_ig_mosaic.sh</code> is located and run</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>chmod +x create_ig_mosaic.sh <span style="color:#cb4b16">\
</span></span></span><span style="display:flex;"><span><span style="color:#cb4b16"></span> <span style="color:#719e07">&amp;&amp;</span> <span style="color:#b58900">source</span> ./create_ig_mosaic.sh <span style="color:#cb4b16">\
</span></span></span><span style="display:flex;"><span><span style="color:#cb4b16"></span> <span style="color:#719e07">&amp;&amp;</span> create_ig_mosaic  <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$HOME</span><span style="color:#2aa198">/Downloads/pexels-blue-bird-7210754.jpg&#34;</span>
</span></span></code></pre></div><p>&hellip;which echoes:</p>
<pre tabindex="0"><code>Image width:  5040
Image height: 3360
Aspect ratio: 1.500
Aimed ratio: 2.244
Height ratio: 2.488
Width  ratio: 1.663
Image width:  5040
Image height: 3360
/home/&lt;user&gt;/Downloads/tile_0.jpg dims: 1080 1350
/home/&lt;user&gt;/Downloads/tile_1.jpg dims: 1080 1350
/home/&lt;user&gt;/Downloads/tile_2.jpg dims: 1080 1350
</code></pre><ol start="4">
<li>Finally. Upload to Instagram, set <code>4:5</code> ratio</li>
</ol>
<p>Actually, before uploading the final images it is a good idea to preview them locally.
To automatically open the result images it&rsquo;s added to the script the <code>open_imgs_side_by_side</code> function.
It will run automatic, if <code>xdotool</code> is installed, when <code>create_ig_mosaic</code> finishes.</p>
<p>Note, if closed any image preview by accident, then just close them all and run <code>open_imgs_side_by_side &quot;$HOME/Downloads&quot;/tile_*.jpg</code>.</p>
<p>So, if we are not satisfied,
we shall repeat previous steps.</p>
<p>In this example the selected image was too tall, or not wide enough.
Anyway, it had a low aspect ratio (<code>width:height = 5040:3360 = 1.5</code>).
The local preview and <a href="https://www.instagram.com/juanmarinerotarazona/">Instagram</a> results are:</p>


<div class="html-content">
  <table class="data-table">
    <tr>
      <td class="data-cell image-cell">
        <img src="/images/blogs/instagram_mosaic/screenshot_preview_final_imgs_01.png" alt="screenshot_preview_final_imgs_01.PNG" class="table-image">
      </td>
      <td class="data-cell">
        <img src="/images/blogs/instagram_mosaic/screenshot_instagram_01.png" alt="screenshot_instagram_01.PNG" class="table-image">
      </td>
    </tr>
  </table>
</div>


<p>To fix this there are some simple approaches:</p>
<ul>
<li><strong>Pick another</strong> image</li>
<li>Extend it horizontally with blank space. This is done already by the script. Thus, forget this approach.</li>
<li><strong>Crop</strong> it <strong>vert</strong>ically.</li>
<li>Ask an <strong>AI</strong> to extend it horizontally with proper background, i.e. <strong>uncrop</strong>. <a href="https://www.pixelcut.ai/uncrop">Pixelcut</a> is a <strong>free</strong> tool for this.</li>
<li>Extend and blur horizontally</li>
</ul>
<p>I just cropped the image with an <strong>image editor</strong> (Gimp, Pinta, online,&hellip;) to:</p>
<pre tabindex="0"><code>Image width:  5040 [not changed]
Image height: 2472
Aspect ratio: 2.038
</code></pre><p>Save it (just overwrite the file). And then run the same command: <code>create_ig_mosaic &quot;$HOME/Downloads/pexels-blue-bird-7210754.jpg&quot;</code></p>
<p>Next is the result, check it in my <a href="https://www.instagram.com/juanmarinerotarazona/">Instagram</a>:</p>


<div class="html-content">
  <img
    src="/images/blogs/instagram_mosaic/screenshot_instagram_02.png"
    style="width:90%;"
    alt="screenshot_instagram_02.png"
    >
</div>


<p><strong>Done!</strong></p>
<h2 id="bonus">Bonus</h2>
<p>Aspect ratio was <code>2.038</code> instead of the desired <code>2.244</code>.</p>
<p>So lets extend and blur horizontally.</p>
<p>The desired pixels are:</p>
<ul>
<li>Vertically: unchanged</li>
<li>Horizontally, apply basic maths:</li>
</ul>
<p>$$
\frac{width_{desired}}{height_{desired}}
= \frac{x}{height}
$$</p>
<p>Since the $height$ is fixed (to 2472), then:</p>


<div class="html-content">
  $$
  \begin{array}{ll}
    x 
    & = \dfrac{width_{desired}}{height_{desired}} &* &height\\
    & = 2.244 &* &2472\\ 
    & = 5547
    \end{array}
  $$
</div>


<p>To extend with blank space we just need to:</p>
<ol>
<li>
<p>If the edited file is called <code>pexels-blue-bird-7210754_cropped-vert.jpg</code>, then, run <code>source ./create_ig_mosaic.sh &amp;&amp; create_ig_mosaic &quot;$HOME/Downloads/pexels-blue-bird-7210754_cropped-vert.jpg&quot;</code></p>
</li>
<li>
<p>This command will create many images. Just close all and run <code>get_image_dimensions &quot;$HOME/Downloads/pexels-blue-bird-7210754_cropped-vert_padded.jpg&quot;</code>
Which will show <code>5548 2472</code>. Almost the desired resize.</p>
</li>
<li>
<p>Open this <em>croped-vert_padded</em> image with an image editor.</p>
</li>
<li>
<p><strong>Manually</strong> select the close to lateral border pixels and paste them over the blank space. No need to be perfect, cause we are going to blur it. Save it.</p>
</li>
<li>
<p>Open that image with a <strong>blur tool</strong>, for example <a href="https://www.quickpicturetools.com/en/blur_edges/">quickpicturetools</a></p>
</li>
<li>
<p>Edit the params. The percentage to blur. Pick a background color like something the lateral-borders, a green-ish color in this case (#909581).
I used the color picker enhanced explained in my <a href="/blogs/color_picker/">other post</a>.</p>
</li>
<li>
<p>Save the blurred image to e.g. <code>blur_edges.jpg</code></p>
</li>
<li>
<p>Run <code>create_ig_mosaic &quot;$HOME/Downloads/blur_edges.jpg&quot;</code></p>
</li>
</ol>
<p>Which outputs next. Notice the original image lost many pixels, but maintened the same aspect ratio.
To avoid this get a non-free image editor to blur the lateral pixels, or even better to generate it with AI.</p>
<pre tabindex="0"><code>Image width:  2000
Image height: 891
Aspect ratio: 2.244
Aimed ratio: 2.244
Height ratio: .660
Width  ratio: .660
Image width:  2000
Image height: 891
/home/&lt;user&gt;/Downloads/tile_0.jpg dims: 1080 1350
/home/&lt;user&gt;/Downloads/tile_1.jpg dims: 1080 1350
/home/&lt;user&gt;/Downloads/tile_2.jpg dims: 1080 1350
</code></pre><ol start="9">
<li>Upload to <a href="https://www.instagram.com/juanmarinerotarazona/">Instagram</a></li>
</ol>


<div class="html-content">
  <img
    src="/images/blogs/instagram_mosaic/screenshot_instagram_03.png"
    style="width:90%;"
    alt="screenshot_instagram_03.png"
    >
</div>


<p>Re-<strong>done!</strong></p>
<h2 id="code">Code</h2>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#719e07">#!/usr/bin/env zsh
</span></span></span><span style="display:flex;"><span><span style="color:#719e07"></span>
</span></span><span style="display:flex;"><span><span style="color:#586e75"># vim: set ts=2 sts=2 sw=2 expandtab tw=0 :</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>create_ig_mosaic<span style="color:#719e07">()</span> <span style="color:#719e07">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># Example usage:</span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># Basic usage with default values (processes img_original.jpg)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># create_ig_mosaic</span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75">#</span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># Typical Instagram mosaic creation:</span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># - Input: your_photo.jpg</span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># - Output: 3 tiles (1010x1350 each with 35px padding)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># - Quality: 85%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># - Float preccision: 4</span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># - Output directory: ./mosaic_output</span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># create_ig_mosaic &#34;your_photo.jpg&#34; 3030 1350 35 3 85 4 &#34;./mosaic_output&#34;</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># Get image</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">image_original</span><span style="color:#719e07">=</span><span style="color:#2aa198">${</span><span style="color:#268bd2">1</span><span style="color:#719e07">:-</span><span style="color:#268bd2">img_original</span>.jpg<span style="color:#2aa198">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># Check if file exists</span>
</span></span><span style="display:flex;"><span>  <span style="color:#719e07">if</span> <span style="color:#719e07">[</span> ! -f <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$image_original</span><span style="color:#2aa198">&#34;</span> <span style="color:#719e07">]</span>; <span style="color:#719e07">then</span>
</span></span><span style="display:flex;"><span>    <span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;File not found: </span><span style="color:#268bd2">$image_original</span><span style="color:#2aa198">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#719e07">return</span> <span style="color:#2aa198">1</span>
</span></span><span style="display:flex;"><span>  <span style="color:#719e07">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># Get final width and height</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">image_final_w</span><span style="color:#719e07">=</span><span style="color:#2aa198">${</span><span style="color:#268bd2">2</span><span style="color:#719e07">:-</span><span style="color:#268bd2">3030</span><span style="color:#2aa198">}</span> <span style="color:#586e75"># 1010 * 3</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">image_final_h</span><span style="color:#719e07">=</span><span style="color:#2aa198">${</span><span style="color:#268bd2">3</span><span style="color:#719e07">:-</span><span style="color:#268bd2">1350</span><span style="color:#2aa198">}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">image_final_w_padd</span><span style="color:#719e07">=</span><span style="color:#2aa198">${</span><span style="color:#268bd2">4</span><span style="color:#719e07">:-</span><span style="color:#268bd2">35</span><span style="color:#2aa198">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># Number of images (same height)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">n_imgs</span><span style="color:#719e07">=</span><span style="color:#2aa198">${</span><span style="color:#268bd2">5</span><span style="color:#719e07">:-</span><span style="color:#268bd2">3</span><span style="color:#2aa198">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># Quality percentage to maintain</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">quality</span><span style="color:#719e07">=</span><span style="color:#2aa198">${</span><span style="color:#268bd2">6</span><span style="color:#719e07">:-</span><span style="color:#268bd2">85</span><span style="color:#2aa198">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># Float preccision</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">scale</span><span style="color:#719e07">=</span><span style="color:#2aa198">${</span><span style="color:#268bd2">7</span><span style="color:#719e07">:-</span><span style="color:#268bd2">3</span><span style="color:#2aa198">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># Output directory</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">output_dir</span><span style="color:#719e07">=</span><span style="color:#2aa198">${</span><span style="color:#268bd2">8</span><span style="color:#719e07">:-$(</span>dirname <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$image_original</span><span style="color:#2aa198">&#34;</span><span style="color:#719e07">)</span><span style="color:#2aa198">}</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># Get width and height</span>
</span></span><span style="display:flex;"><span>  get_image_dimensions <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$image_original</span><span style="color:#2aa198">&#34;</span> | <span style="color:#719e07">{</span> <span style="color:#b58900">read</span> image_w image_h; <span style="color:#719e07">}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;Image width:  </span><span style="color:#268bd2">$image_w</span><span style="color:#2aa198">&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;Image height: </span><span style="color:#268bd2">$image_h</span><span style="color:#2aa198">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># Calculate ratios</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">aspect_ratio</span><span style="color:#719e07">=</span><span style="color:#719e07">$(</span><span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;scale=&#34;</span><span style="color:#268bd2">$scale</span><span style="color:#2aa198">&#34;; </span><span style="color:#268bd2">$image_w</span><span style="color:#2aa198"> / </span><span style="color:#268bd2">$image_h</span><span style="color:#2aa198">&#34;</span> | bc<span style="color:#719e07">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;Aspect ratio: </span><span style="color:#268bd2">$aspect_ratio</span><span style="color:#2aa198">&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">aspect_ratio_desired</span><span style="color:#719e07">=</span><span style="color:#719e07">$(</span><span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;scale=&#34;</span><span style="color:#268bd2">$scale</span><span style="color:#2aa198">&#34;; </span><span style="color:#268bd2">$image_final_w</span><span style="color:#2aa198"> / </span><span style="color:#268bd2">$image_final_h</span><span style="color:#2aa198">&#34;</span> | bc<span style="color:#719e07">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;Aimed ratio: </span><span style="color:#268bd2">$aspect_ratio_desired</span><span style="color:#2aa198">&#34;</span> <span style="color:#586e75"># 2.24</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">h_ratio</span><span style="color:#719e07">=</span><span style="color:#719e07">$(</span><span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;scale=&#34;</span><span style="color:#268bd2">$scale</span><span style="color:#2aa198">&#34;; </span><span style="color:#268bd2">$image_h</span><span style="color:#2aa198"> / </span><span style="color:#268bd2">$image_final_h</span><span style="color:#2aa198">&#34;</span> | bc<span style="color:#719e07">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">w_ratio</span><span style="color:#719e07">=</span><span style="color:#719e07">$(</span><span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;scale=&#34;</span><span style="color:#268bd2">$scale</span><span style="color:#2aa198">&#34;; </span><span style="color:#268bd2">$image_w</span><span style="color:#2aa198"> / </span><span style="color:#268bd2">$image_final_w</span><span style="color:#2aa198">&#34;</span> | bc<span style="color:#719e07">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;Height ratio: </span><span style="color:#268bd2">$h_ratio</span><span style="color:#2aa198">&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;Width  ratio: </span><span style="color:#268bd2">$w_ratio</span><span style="color:#2aa198">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># If the aspect ratio is smaller than the desired aspect ratio then add horizontal white borders, otherwise add them vertically</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">image_padded</span><span style="color:#719e07">=</span><span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$output_dir</span><span style="color:#2aa198">&#34;</span>/<span style="color:#719e07">$(</span>add_suffix_before_ext <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$image_original</span><span style="color:#2aa198">&#34;</span> <span style="color:#2aa198">&#34;_padded&#34;</span><span style="color:#719e07">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">dimensions</span><span style="color:#719e07">=</span><span style="color:#2aa198">&#34;</span><span style="color:#2aa198">${</span><span style="color:#268bd2">image_w</span><span style="color:#2aa198">}</span><span style="color:#2aa198">x</span><span style="color:#2aa198">${</span><span style="color:#268bd2">image_h</span><span style="color:#2aa198">}</span><span style="color:#2aa198">&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#719e07">if</span> <span style="color:#719e07">[</span> <span style="color:#719e07">$(</span><span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$aspect_ratio</span><span style="color:#2aa198"> &lt; </span><span style="color:#268bd2">$aspect_ratio_desired</span><span style="color:#2aa198">&#34;</span> | bc<span style="color:#719e07">)</span> -eq <span style="color:#2aa198">1</span> <span style="color:#719e07">]</span>; <span style="color:#719e07">then</span>
</span></span><span style="display:flex;"><span>    <span style="color:#268bd2">image_w_new</span><span style="color:#719e07">=</span><span style="color:#719e07">$(</span><span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;scale=&#34;</span><span style="color:#268bd2">$scale</span><span style="color:#2aa198">&#34;; </span><span style="color:#268bd2">$image_final_w</span><span style="color:#2aa198"> * </span><span style="color:#268bd2">$h_ratio</span><span style="color:#2aa198">&#34;</span> | bc<span style="color:#719e07">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#268bd2">dimensions</span><span style="color:#719e07">=</span><span style="color:#2aa198">&#34;</span><span style="color:#2aa198">${</span><span style="color:#268bd2">image_w_new</span><span style="color:#2aa198">}</span><span style="color:#2aa198">x</span><span style="color:#2aa198">${</span><span style="color:#268bd2">image_h</span><span style="color:#2aa198">}</span><span style="color:#2aa198">&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#719e07">else</span>
</span></span><span style="display:flex;"><span>    <span style="color:#268bd2">image_h_new</span><span style="color:#719e07">=</span><span style="color:#719e07">$(</span><span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;scale=&#34;</span><span style="color:#268bd2">$scale</span><span style="color:#2aa198">&#34;; </span><span style="color:#268bd2">$image_final_h</span><span style="color:#2aa198"> * </span><span style="color:#268bd2">$w_ratio</span><span style="color:#2aa198">&#34;</span> | bc<span style="color:#719e07">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#268bd2">dimensions</span><span style="color:#719e07">=</span><span style="color:#2aa198">&#34;</span><span style="color:#2aa198">${</span><span style="color:#268bd2">image_w</span><span style="color:#2aa198">}</span><span style="color:#2aa198">x</span><span style="color:#2aa198">${</span><span style="color:#268bd2">image_h_new</span><span style="color:#2aa198">}</span><span style="color:#2aa198">&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#719e07">fi</span>
</span></span><span style="display:flex;"><span>  convert <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$image_original</span><span style="color:#2aa198">&#34;</span> -background white -gravity center -extent <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$dimensions</span><span style="color:#2aa198">&#34;</span> <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$image_padded</span><span style="color:#2aa198">&#34;</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># Resize</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">image_resized</span><span style="color:#719e07">=</span><span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$output_dir</span><span style="color:#2aa198">&#34;</span>/<span style="color:#719e07">$(</span>add_suffix_before_ext <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$image_padded</span><span style="color:#2aa198">&#34;</span> <span style="color:#2aa198">&#34;_resized&#34;</span><span style="color:#719e07">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#268bd2">dimensions</span><span style="color:#719e07">=</span><span style="color:#2aa198">&#34;</span><span style="color:#2aa198">${</span><span style="color:#268bd2">image_final_w</span><span style="color:#2aa198">}</span><span style="color:#2aa198">x</span><span style="color:#2aa198">${</span><span style="color:#268bd2">image_final_h</span><span style="color:#2aa198">}</span><span style="color:#2aa198">&#34;</span>
</span></span><span style="display:flex;"><span>  convert <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$image_padded</span><span style="color:#2aa198">&#34;</span> -resize <span style="color:#268bd2">$dimensions</span> -quality <span style="color:#268bd2">$quality</span> <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$image_resized</span><span style="color:#2aa198">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># Check width and height</span>
</span></span><span style="display:flex;"><span>  get_image_dimensions <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$image_original</span><span style="color:#2aa198">&#34;</span> | <span style="color:#719e07">{</span> <span style="color:#b58900">read</span> image_w_resized image_h_resized; <span style="color:#719e07">}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;Image width:  </span><span style="color:#268bd2">$image_w_resized</span><span style="color:#2aa198">&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;Image height: </span><span style="color:#268bd2">$image_h_resized</span><span style="color:#2aa198">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># Divide in $n_imgs of equal height</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">dimension_w</span><span style="color:#719e07">=</span><span style="color:#719e07">$(</span><span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;scale=0; </span><span style="color:#268bd2">$image_final_w</span><span style="color:#2aa198"> / </span><span style="color:#268bd2">$n_imgs</span><span style="color:#2aa198">&#34;</span> | bc<span style="color:#719e07">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#268bd2">dimensions</span><span style="color:#719e07">=</span><span style="color:#2aa198">&#34;</span><span style="color:#2aa198">${</span><span style="color:#268bd2">dimension_w</span><span style="color:#2aa198">}</span><span style="color:#2aa198">x</span><span style="color:#2aa198">${</span><span style="color:#268bd2">image_final_h</span><span style="color:#2aa198">}</span><span style="color:#2aa198">&#34;</span>
</span></span><span style="display:flex;"><span>  convert <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$image_resized</span><span style="color:#2aa198">&#34;</span> -crop <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$dimensions</span><span style="color:#2aa198">&#34;</span> +repage <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$output_dir</span><span style="color:#2aa198">&#34;</span>/tile_%d.jpg
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># Extend each section to 1080x1350 pixels by adding 35 pixels of extra space to both the left and right sides</span>
</span></span><span style="display:flex;"><span>  <span style="color:#719e07">((</span> <span style="color:#268bd2">dimension_w</span> <span style="color:#719e07">+=</span> <span style="color:#2aa198">2</span> * image_final_w_padd <span style="color:#719e07">))</span>
</span></span><span style="display:flex;"><span>  <span style="color:#268bd2">dimensions</span><span style="color:#719e07">=</span><span style="color:#2aa198">&#34;</span><span style="color:#2aa198">${</span><span style="color:#268bd2">dimension_w</span><span style="color:#2aa198">}</span><span style="color:#2aa198">x</span><span style="color:#2aa198">${</span><span style="color:#268bd2">image_final_h</span><span style="color:#2aa198">}</span><span style="color:#2aa198">&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#719e07">for</span> file in <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$output_dir</span><span style="color:#2aa198">&#34;</span>/tile_*.jpg; <span style="color:#719e07">do</span>
</span></span><span style="display:flex;"><span>    convert <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$file</span><span style="color:#2aa198">&#34;</span> -background white -gravity center -extent <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$dimensions</span><span style="color:#2aa198">&#34;</span> <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$file</span><span style="color:#2aa198">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#b58900">echo</span> -n <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$file</span><span style="color:#2aa198"> dims: &#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#b58900">echo</span> <span style="color:#719e07">$(</span>get_image_dimensions <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$file</span><span style="color:#2aa198">&#34;</span><span style="color:#719e07">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#719e07">done</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># Open imgs side-by-side</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">imgs_to_preview</span><span style="color:#719e07">=(</span><span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$output_dir</span><span style="color:#2aa198">&#34;</span>/tile_*.jpg<span style="color:#719e07">)</span>
</span></span><span style="display:flex;"><span>  open_imgs_side_by_side <span style="color:#268bd2">$imgs_to_preview</span>
</span></span><span style="display:flex;"><span><span style="color:#719e07">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>open_imgs_side_by_side<span style="color:#719e07">()</span> <span style="color:#719e07">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># Accept an array of files as input</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">files</span><span style="color:#719e07">=(</span><span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$@</span><span style="color:#2aa198">&#34;</span><span style="color:#719e07">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">n_imgs</span><span style="color:#719e07">=</span><span style="color:#2aa198">${#</span><span style="color:#268bd2">files</span><span style="color:#2aa198">}</span>  <span style="color:#586e75"># Use all files by default</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># Optional: Limit to first N images (uncomment if needed)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># local max_imgs=3</span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># (( n_imgs &gt; max_imgs )) &amp;&amp; n_imgs=$max_imgs</span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># files=(&#34;${files[@]:1:$n_imgs}&#34;)  # zsh uses 1-based indexing</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># Get screen width</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">SCREEN_WIDTH</span><span style="color:#719e07">=</span><span style="color:#719e07">$(</span>xwininfo -root | awk <span style="color:#2aa198">&#39;/Width:/ {print $2}&#39;</span><span style="color:#719e07">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">WIDTH</span><span style="color:#719e07">=</span><span style="color:#719e07">$((</span>SCREEN_WIDTH <span style="color:#719e07">/</span> n_imgs<span style="color:#719e07">))</span>
</span></span><span style="display:flex;"><span>  <span style="color:#719e07">((</span> WIDTH *<span style="color:#719e07">=</span> 1.01 <span style="color:#719e07">))</span>  <span style="color:#586e75"># Small overlap adjustment</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># Array to store PIDs</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">pids</span><span style="color:#719e07">=()</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># Process images</span>
</span></span><span style="display:flex;"><span>  <span style="color:#719e07">for</span> <span style="color:#719e07">((</span> <span style="color:#268bd2">i</span><span style="color:#719e07">=</span>1; i&lt;<span style="color:#719e07">=</span>n_imgs; i++ <span style="color:#719e07">))</span>; <span style="color:#719e07">do</span>
</span></span><span style="display:flex;"><span>    eog <span style="color:#2aa198">&#34;</span><span style="color:#2aa198">${</span><span style="color:#268bd2">files</span>[i]<span style="color:#2aa198">}</span><span style="color:#2aa198">&#34;</span> &amp;
</span></span><span style="display:flex;"><span>    <span style="color:#268bd2">pids</span><span style="color:#719e07">+=(</span><span style="color:#268bd2">$!</span><span style="color:#719e07">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    sleep 0.5  <span style="color:#586e75"># Wait for window to open</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#b58900">local</span> <span style="color:#268bd2">X_POS</span><span style="color:#719e07">=</span><span style="color:#719e07">$((</span> <span style="color:#719e07">(</span>i-1<span style="color:#719e07">)</span> <span style="color:#719e07">*</span> WIDTH <span style="color:#719e07">))</span>  <span style="color:#586e75"># X position starts at 0</span>
</span></span><span style="display:flex;"><span>    xdotool search --name <span style="color:#2aa198">&#34;</span><span style="color:#2aa198">${</span><span style="color:#268bd2">files</span>[i]##*/<span style="color:#2aa198">}</span><span style="color:#2aa198">&#34;</span> windowactivate --sync <span style="color:#cb4b16">\
</span></span></span><span style="display:flex;"><span><span style="color:#cb4b16"></span>      windowsize %@ <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$WIDTH</span><span style="color:#2aa198">&#34;</span> 100% windowmove %@ <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$X_POS</span><span style="color:#2aa198">&#34;</span> <span style="color:#2aa198">0</span>
</span></span><span style="display:flex;"><span>  <span style="color:#719e07">done</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">wait</span> <span style="color:#268bd2">$pids</span><span style="color:#719e07">[</span>@<span style="color:#719e07">]</span>
</span></span><span style="display:flex;"><span><span style="color:#719e07">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>get_image_dimensions<span style="color:#719e07">()</span> <span style="color:#719e07">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">image_file</span><span style="color:#719e07">=</span><span style="color:#268bd2">$1</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">exif_output</span><span style="color:#719e07">=</span><span style="color:#719e07">$(</span>exiftool <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$image_file</span><span style="color:#2aa198">&#34;</span><span style="color:#719e07">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">width</span><span style="color:#719e07">=</span><span style="color:#719e07">$(</span><span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$exif_output</span><span style="color:#2aa198">&#34;</span> | grep <span style="color:#2aa198">&#34;Image Width&#34;</span> | awk -F<span style="color:#2aa198">&#39;: &#39;</span> <span style="color:#2aa198">&#39;{print $2}&#39;</span><span style="color:#719e07">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">height</span><span style="color:#719e07">=</span><span style="color:#719e07">$(</span><span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$exif_output</span><span style="color:#2aa198">&#34;</span> | grep <span style="color:#2aa198">&#34;Image Height&#34;</span> | awk -F<span style="color:#2aa198">&#39;: &#39;</span> <span style="color:#2aa198">&#39;{print $2}&#39;</span><span style="color:#719e07">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#719e07">if</span> <span style="color:#719e07">[</span> -z <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$width</span><span style="color:#2aa198">&#34;</span> <span style="color:#719e07">]</span> <span style="color:#719e07">||</span> <span style="color:#719e07">[</span> -z <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$height</span><span style="color:#2aa198">&#34;</span> <span style="color:#719e07">]</span>; <span style="color:#719e07">then</span>
</span></span><span style="display:flex;"><span>    <span style="color:#719e07">return</span> <span style="color:#2aa198">1</span>
</span></span><span style="display:flex;"><span>  <span style="color:#719e07">fi</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$width</span><span style="color:#2aa198"> </span><span style="color:#268bd2">$height</span><span style="color:#2aa198">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#719e07">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>add_suffix_before_ext<span style="color:#719e07">()</span> <span style="color:#719e07">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">filename</span><span style="color:#719e07">=</span><span style="color:#268bd2">$1</span>      <span style="color:#586e75"># full filename, e.g. img_original.jpg</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">suffix</span><span style="color:#719e07">=</span><span style="color:#268bd2">$2</span>        <span style="color:#586e75"># suffix to add, e.g. _padded</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># Extract basename without extension and extension using zsh modifiers</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">base</span><span style="color:#719e07">=</span><span style="color:#2aa198">${</span><span style="color:#268bd2">filename</span>:<span style="color:#268bd2">t</span>:<span style="color:#268bd2">r</span><span style="color:#2aa198">}</span>   <span style="color:#586e75"># filename without path and extension</span>
</span></span><span style="display:flex;"><span>  <span style="color:#b58900">local</span> <span style="color:#268bd2">ext</span><span style="color:#719e07">=</span><span style="color:#2aa198">${</span><span style="color:#268bd2">filename</span>:<span style="color:#268bd2">e</span><span style="color:#2aa198">}</span>      <span style="color:#586e75"># extension without dot</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#586e75"># Compose new filename with suffix before extension</span>
</span></span><span style="display:flex;"><span>  <span style="color:#719e07">if</span> <span style="color:#719e07">[[</span> -n <span style="color:#268bd2">$ext</span> <span style="color:#719e07">]]</span>; <span style="color:#719e07">then</span>
</span></span><span style="display:flex;"><span>    <span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;</span><span style="color:#2aa198">${</span><span style="color:#268bd2">base</span><span style="color:#2aa198">}${</span><span style="color:#268bd2">suffix</span><span style="color:#2aa198">}</span><span style="color:#2aa198">.</span><span style="color:#2aa198">${</span><span style="color:#268bd2">ext</span><span style="color:#2aa198">}</span><span style="color:#2aa198">&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#719e07">else</span>
</span></span><span style="display:flex;"><span>    <span style="color:#586e75"># If no extension, just add suffix at end</span>
</span></span><span style="display:flex;"><span>    <span style="color:#b58900">echo</span> <span style="color:#2aa198">&#34;</span><span style="color:#2aa198">${</span><span style="color:#268bd2">base</span><span style="color:#2aa198">}${</span><span style="color:#268bd2">suffix</span><span style="color:#2aa198">}</span><span style="color:#2aa198">&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#719e07">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#719e07">}</span>
</span></span></code></pre></div><h2 id="extra-latex-in-hugo-scroll">Extra: LaTeX in Hugo Scroll</h2>
<p>How did I enable $\LaTeX$ for the equations of the <a href="/blogs/instagram_mosaic/#bonus">Bonus</a> section?</p>


<div class="html-content">
  Check my blog
  <a href="/blogs/latex_for_webdev/">
  $\LaTeX$ and $\text{Ti}\textit{k}\text{Z}$ for <strong>web dev</strong>
  </a>
  .
</div>




<div class="html-content">
  <br>
  <a id="back-to-blogs-index" href="/blogs_index"><i class="fa fa-chevron-left" aria-hidden="true"></i> Blogs</a> 
  <br>
  <a id="back-to-main-page" href="/"><i class="fa fa-chevron-left" aria-hidden="true"></i>J. Marinero - Data Scientist & AI Engineer</a>
  <br>
</div>



      </section>
    </article>
  </main>




<footer class="site-footer">
  <div class="inner">
    
    <section class="links">
      <ol>
      
        <li>
          <a href="/license/">License</a>
        </li>
      
      </ol>
    </section>
    <hr />
    

    
      <section class="icons">
        
          <a href="tel:&#43;&#43;34%20616%2042%2036%2034" aria-label=''><i class="fa fa-phone"></i></a>
        
          <a href="mailto:juan.g.marinero@gmail.com" aria-label=''><i class="fa fa-envelope"></i></a>
        
          <a href="https://github.com/juanMarinero" aria-label=''><i class="fa-brands fa-github"></i></a>
        
          <a href="https://www.linkedin.com/in/juanmarinero/" aria-label=''><i class="fa-brands fa-linkedin"></i></a>
        
          <a href="https://juan-marinero.info/" aria-label=''><i class="fa fa-globe"></i></a>
        
      </section>
    

    
      <section class="copyright">Juan Gabriel Marinero Tarazona</section>
    

    

    
  </div>
</footer>


    

    
    
    
    

    <script src="/js/script.min.e853a4dfd899ef0f5749c33d64e2388119f4f8f866221b83ae75f840abec921a.js" integrity="sha256-6FOk39iZ7w9XScM9ZOI4gRn0&#43;PhmIhuDrnX4QKvskho=" ></script>

    
    <script>cssVars();</script>

    
</body>
</html>
